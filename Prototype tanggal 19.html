<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Scheduled Message Portal</title>
    <script src="https://cdn.tailwindcss.com"></script>
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.4.0/css/all.min.css">
    <script>
        tailwind.config = {
            theme: {
                extend: {
                    colors: {
                        primary: '#6366f1',
                        secondary: '#8b5cf6',
                        dark: '#1e293b',
                        light: '#f8fafc'
                    }
                }
            }
        }
    </script>
    <style>
        .glow {
            box-shadow: 0 0 15px rgba(99, 102, 241, 0.5);
        }
        .pulse {
            animation: pulse 2s infinite;
        }
        @keyframes pulse {
            0% { opacity: 1; }
            50% { opacity: 0.7; }
            100% { opacity: 1; }
        }
        .locked {
            filter: grayscale(100%) opacity(0.6);
        }
    </style>
</head>
<body class="bg-gradient-to-br from-slate-900 via-purple-900 to-slate-900 min-h-screen">
    <div id="app" class="container mx-auto px-4 py-8">
        <!-- Header -->
        <header class="text-center mb-12">
            <h1 class="text-4xl md:text-6xl font-bold text-white mb-4">
                <i class="fas fa-envelope-open-text mr-3"></i>Message Portal
            </h1>
            <p class="text-slate-300 text-lg">Secure scheduled messaging system</p>
        </header>

        <!-- Developer Mode Toggle -->
        <div class="flex justify-center mb-8">
            <div class="relative">
                <input type="password" id="devPassword" placeholder="Enter developer password" 
                       class="px-4 py-2 rounded-l-lg border-2 border-primary bg-slate-800 text-white placeholder-slate-400 focus:outline-none focus:border-secondary transition-all">
                <button onclick="toggleDeveloperMode()" 
                        class="bg-primary hover:bg-secondary text-white px-6 py-2 rounded-r-lg font-semibold transition-all duration-300">
                    <i class="fas fa-lock mr-2"></i>Developer Mode
                </button>
            </div>
        </div>

        <!-- Developer Dashboard -->
        <div id="developerDashboard" class="hidden mb-12">
            <div class="bg-slate-800 rounded-xl p-6 border border-primary glow">
                <h2 class="text-2xl font-bold text-white mb-6 text-center">
                    <i class="fas fa-cog mr-3"></i>Developer Dashboard
                </h2>
                
                <div class="grid grid-cols-1 md:grid-cols-2 gap-6">
                    <!-- Message Editor -->
                    <div class="bg-slate-700 rounded-lg p-4">
                        <h3 class="text-lg font-semibold text-white mb-3">
                            <i class="fas fa-edit mr-2"></i>Edit Message
                        </h3>
                        <textarea id="messageContent" rows="4" 
                                  class="w-full p-3 bg-slate-600 text-white rounded-lg border border-slate-500 focus:border-primary focus:outline-none"
                                  placeholder="Enter your message here...">Your message will appear here when the scheduled time arrives!</textarea>
                    </div>

                    <!-- Schedule Settings -->
                    <div class="bg-slate-700 rounded-lg p-4">
                        <h3 class="text-lg font-semibold text-white mb-3">
                            <i class="fas fa-clock mr-2"></i>Schedule Settings
                        </h3>
                        <div class="space-y-3">
                            <div>
                                <label class="block text-slate-300 mb-1">Scheduled Date & Time</label>
                                <input type="datetime-local" id="scheduleTime" 
                                       class="w-full p-2 bg-slate-600 text-white rounded border border-slate-500 focus:border-primary focus:outline-none">
                            </div>
                            <div class="flex items-center">
                                <input type="checkbox" id="manualTrigger" class="mr-2 h-5 w-5 text-primary">
                                <label for="manualTrigger" class="text-slate-300">Enable Manual Trigger (Ignore Schedule)</label>
                            </div>
                        </div>
                    </div>
                </div>

                <div class="mt-6 text-center">
                    <button onclick="saveMessage()" 
                            class="bg-green-600 hover:bg-green-700 text-white px-6 py-2 rounded-lg font-semibold mr-3 transition-all">
                        <i class="fas fa-save mr-2"></i>Save Message
                    </button>
                    <button onclick="clearMessage()" 
                            class="bg-red-600 hover:bg-red-700 text-white px-6 py-2 rounded-lg font-semibold transition-all">
                        <i class="fas fa-trash mr-2"></i>Clear Message
                    </button>
                </div>
            </div>
        </div>

        <!-- Message Display Area -->
        <div class="max-w-4xl mx-auto">
            <div id="messageContainer" class="bg-slate-800 rounded-xl p-8 border-2 border-slate-700 min-h-64 flex items-center justify-center">
                <div id="messagePlaceholder" class="text-center text-slate-400">
                    <i class="fas fa-hourglass-half text-6xl mb-4"></i>
                    <h3 class="text-2xl font-semibold mb-2">Waiting for Message...</h3>
                    <p id="countdownText" class="text-lg"></p>
                </div>
                <div id="messageContentDisplay" class="hidden text-center">
                    <div class="bg-gradient-to-r from-primary to-secondary text-white p-8 rounded-xl">
                        <h2 class="text-3xl font-bold mb-4">Special Message</h2>
                        <p id="displayedMessage" class="text-xl leading-relaxed"></p>
                    </div>
                </div>
            </div>
        </div>

        <!-- Status Info -->
        <div id="statusInfo" class="mt-8 text-center text-slate-400">
            <p id="statusText"></p>
        </div>
    </div>

    <script>
        // Updated developer password as requested
        const DEV_PASSWORD = "Grid6BsisEka";
        let currentMessage = "";
        let scheduledTime = null;
        let manualTriggerEnabled = false;
        let countdownInterval = null;

        // Initialize from localStorage (simulating server storage)
        function loadStoredData() {
            const stored = localStorage.getItem('messageData');
            if (stored) {
                try {
                    const data = JSON.parse(stored);
                    currentMessage = data.message || "";
                    scheduledTime = data.scheduledTime ? new Date(data.scheduledTime) : null;
                    manualTriggerEnabled = data.manualTrigger || false;
                    document.getElementById('messageContent').value = currentMessage;
                    if (scheduledTime) {
                        document.getElementById('scheduleTime').value = scheduledTime.toISOString().slice(0, 16);
                    }
                    document.getElementById('manualTrigger').checked = manualTriggerEnabled;
                } catch (e) {
                    console.error('Failed to load stored data');
                }
            }
        }

        // Save to localStorage
        function saveToStorage() {
            const data = {
                message: currentMessage,
                scheduledTime: scheduledTime ? scheduledTime.toISOString() : null,
                manualTrigger: manualTriggerEnabled
            };
            localStorage.setItem('messageData', JSON.stringify(data));
        }

        // Toggle developer mode
        function toggleDeveloperMode() {
            const password = document.getElementById('devPassword').value;
            const dashboard = document.getElementById('developerDashboard');
            
            if (password === DEV_PASSWORD) {
                dashboard.classList.remove('hidden');
                document.getElementById('devPassword').value = '';
                document.getElementById('devPassword').placeholder = 'Developer mode active';
                document.getElementById('devPassword').disabled = true;
                updateStatus("Developer mode activated");
            } else {
                alert('Incorrect password!');
                updateStatus("Access denied");
            }
        }

        // Save message configuration
        function saveMessage() {
            currentMessage = document.getElementById('messageContent').value;
            const scheduleInput = document.getElementById('scheduleTime').value;
            manualTriggerEnabled = document.getElementById('manualTrigger').checked;
            
            if (scheduleInput && !manualTriggerEnabled) {
                scheduledTime = new Date(scheduleInput);
            } else {
                scheduledTime = null;
            }
            
            saveToStorage();
            updateStatus("Message configuration saved!");
            updateMessageDisplay();
        }

        // Clear message
        function clearMessage() {
            currentMessage = "";
            scheduledTime = null;
            manualTriggerEnabled = false;
            
            document.getElementById('messageContent').value = "";
            document.getElementById('scheduleTime').value = "";
            document.getElementById('manualTrigger').checked = false;
            
            saveToStorage();
            updateStatus("Message cleared!");
            updateMessageDisplay();
        }

        // Update status display
        function updateStatus(message) {
            const statusEl = document.getElementById('statusText');
            statusEl.textContent = message;
            setTimeout(() => {
                statusEl.textContent = "";
            }, 3000);
        }

        // Update message display based on current state
        function updateMessageDisplay() {
            const now = new Date();
            const placeholder = document.getElementById('messagePlaceholder');
            const contentDisplay = document.getElementById('messageContentDisplay');
            const countdownText = document.getElementById('countdownText');
            
            // Clear any existing interval
            if (countdownInterval) {
                clearInterval(countdownInterval);
                countdownInterval = null;
            }
            
            // Check if message should be displayed
            let shouldDisplay = false;
            
            if (manualTriggerEnabled && currentMessage) {
                shouldDisplay = true;
            } else if (scheduledTime && currentMessage && now >= scheduledTime) {
                shouldDisplay = true;
            }
            
            if (shouldDisplay && currentMessage) {
                placeholder.classList.add('hidden');
                contentDisplay.classList.remove('hidden');
                document.getElementById('displayedMessage').textContent = currentMessage;
                countdownText.textContent = "";
            } else {
                placeholder.classList.remove('hidden');
                contentDisplay.classList.add('hidden');
                
                if (scheduledTime && !manualTriggerEnabled) {
                    // Set up countdown
                    countdownInterval = setInterval(() => {
                        const now = new Date();
                        const diff = scheduledTime - now;
                        
                        if (diff <= 0) {
                            updateMessageDisplay();
                            return;
                        }
                        
                        const days = Math.floor(diff / (1000 * 60 * 60 * 24));
                        const hours = Math.floor((diff % (1000 * 60 * 60 * 24)) / (1000 * 60 * 60));
                        const minutes = Math.floor((diff % (1000 * 60 * 60)) / (1000 * 60));
                        const seconds = Math.floor((diff % (1000 * 60)) / 1000);
                        
                        let countdown = "";
                        if (days > 0) countdown += `${days}d `;
                        if (hours > 0) countdown += `${hours}h `;
                        if (minutes > 0) countdown += `${minutes}m `;
                        countdown += `${seconds}s`;
                        
                        countdownText.textContent = `Message will appear in: ${countdown}`;
                    }, 1000);
                    
                    // Initial countdown update
                    const diff = scheduledTime - now;
                    if (diff > 0) {
                        const days = Math.floor(diff / (1000 * 60 * 60 * 24));
                        const hours = Math.floor((diff % (1000 * 60 * 60 * 24)) / (1000 * 60 * 60));
                        const minutes = Math.floor((diff % (1000 * 60 * 60)) / (1000 * 60));
                        const seconds = Math.floor((diff % (1000 * 60)) / 1000);
                        
                        let countdown = "";
                        if (days > 0) countdown += `${days}d `;
                        if (hours > 0) countdown += `${hours}h `;
                        if (minutes > 0) countdown += `${minutes}m `;
                        countdown += `${seconds}s`;
                        
                        countdownText.textContent = `Message will appear in: ${countdown}`;
                    }
                } else if (manualTriggerEnabled) {
                    countdownText.textContent = "Manual trigger enabled - message will appear immediately";
                } else {
                    countdownText.textContent = "No message scheduled";
                }
            }
        }

        // Initialize
        document.addEventListener('DOMContentLoaded', () => {
            loadStoredData();
            updateMessageDisplay();
            
            // Auto-update every second for time-based checks
            setInterval(updateMessageDisplay, 1000);
        });
    </script>
</body>
</html>

